#include "font.h"

/* Simple 8x8 font bitmap (partial set) */
/* This is a very basic 8x8 bitmap font for demonstration */
/* In a real project, we would use a PSF or PCF font file */
static uint8_t font8x8_basic[128][8] = {
    ['P'] = {0xFC, 0x66, 0x66, 0x7C, 0x60, 0x60, 0x60, 0x00},
    ['a'] = {0x00, 0x00, 0x7C, 0x06, 0x7E, 0x66, 0x7E, 0x00},
    ['r'] = {0x00, 0x00, 0xDC, 0x66, 0x60, 0x60, 0x60, 0x00},
    ['d'] = {0x0E, 0x06, 0x7E, 0x66, 0x66, 0x66, 0x7E, 0x00},
    ['o'] = {0x00, 0x00, 0x7C, 0x66, 0x66, 0x66, 0x7C, 0x00},
    ['x'] = {0x00, 0x00, 0x66, 0x3C, 0x18, 0x3C, 0x66, 0x00},
    [' '] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
    ['O'] = {0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00},
    ['S'] = {0x3C, 0x66, 0x60, 0x3C, 0x06, 0x66, 0x3C, 0x00},
    ['W'] = {0x66, 0x66, 0x66, 0x66, 0x7E, 0x7E, 0x66, 0x00},
    ['e'] = {0x00, 0x00, 0x7C, 0x66, 0x7E, 0x60, 0x7C, 0x00},
    ['l'] = {0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x00},
    ['c'] = {0x00, 0x00, 0x7C, 0x66, 0x60, 0x66, 0x7C, 0x00},
    ['m'] = {0x00, 0x00, 0xFE, 0xBA, 0xBA, 0xBA, 0xBA, 0x00},
    ['t'] = {0x18, 0x18, 0x7E, 0x18, 0x18, 0x18, 0x0E, 0x00}
};

void font_draw_char(char c, uint32_t x, uint32_t y, color_t color) {
    if ((uint8_t)c > 127) return;
    for (int i = 0; i < 8; i++) {
        for (int j = 0; j < 8; j++) {
            if (font8x8_basic[(int)c][i] & (1 << (7 - j))) {
                gfx_put_pixel(x + j, y + i, color);
            }
        }
    }
}

void font_draw_string(const char *str, uint32_t x, uint32_t y, color_t color) {
    while (*str) {
        font_draw_char(*str, x, y, color);
        x += 8;
        str++;
    }
}
